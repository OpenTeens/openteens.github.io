<center>
    <div class="content"></div>
</center>

<link rel="stylesheet" href="/css/flipcard.css">

<!-- Generate user cards -->
<script>
    cates = {
        "cof": "Co-funders",
        "core": "Core Members",
        "mem": "Members",
    }
    users = {
        "黄锦源": {
            name: ["黄锦源", "Bernie J. Huang"],
            title: "Co-funder",
            cate: ["core", "cof", "mem"],
            img: "bernie.jpg",
            desc: " - 开源项目 SearXNG 贡献者\n - 哈佛大学 cs50/ddb50.vsix 贡献者",
            links: {
                "&#xF09b;": "//github.com/BernieHuang2008",  // github
            }
        },
        "陈广宇": {
            name: ["陈广宇", "Nathan Chen"],
            title: "Co-funder",
            cate: ["core", "cof", "mem"],
            img: "nathan.jpg",
            desc: "",
            links: {
                "&#xF09b;": "//github.com/Nathancgy",  // github
            }
        },
        "Carmen": {
            name: ["Carmen", "Carmen Zhang"],
            title: "Co-funder",
            cate: ["cof", "mem"],
            img: "carmen.jpg",
            desc: "",
            links: {
                "&#xF09b;": "//github.com/CJWZhang",  // github
            }
        },
        "霍梓烨": {
            name: ["霍梓烨", "Leo Huo"],
            title: "Core Member",
            cate: ["core", "mem"],
            img: "leo_huo.jpg",
            desc: "",
            links: {
                "&#xF09b;": "https://github.com/lanbinshijie",  // github
            }
        },
        "卢思江": {
            name: ["卢思江", "Jack Lu"],
            title: "Core Member",
            cate: ["core", "mem"],
            img: "jack.jpg",
            desc: "",
        },
        "许焕桦": {
            name: ["许焕桦", "George Xu"],
            title: "Core Member",
            cate: ["core", "mem"],
            img: "xu.jpg",
            desc: "",
        },
        "杨臻": {
            name: ["杨臻", "Leo Yang"],
            title: "Co-funder",
            cate: ["cof", "mem"],
            img: "leo_yang.jpg",
            desc: "",
            links: {
                "&#xF09b;": "//github.com/Potato1145141919810",  // github
            }
        },
        "Richard": {
            name: ["Richard", "Richard"],
            title: "Co-funder",
            cate: ["cof", "mem"],
            img: "richard.jpg",
            desc: "",
            links: {
                "&#xF09b;": "//github.com/Richard-31415",  // github
            }
        },
    }

    var categories = ["core", "cof", "mem"];
    var sorted_by_cate = {};
    for (user_name in users) {
        var u = users[user_name];
        var cate = u.cate;
        cate.forEach(c => {
            if (sorted_by_cate[c] == undefined) {
                sorted_by_cate[c] = [];
            }
            sorted_by_cate[c].push(u);
        })
    }

    // function shuffleArray(array) {
    //     for (let i = array.length - 1; i > 0; i--) {
    //         const j = Math.floor(Math.random() * (i + 1));
    //         [array[i], array[j]] = [array[j], array[i]];
    //     }
    // }

    // shuffleArray(sorted_by_cate["Co-funder"]);
    // shuffleArray(sorted_by_cate["core"]);
    // shuffleArray(sorted_by_cate["member"]);

    categories.forEach(c => {
        var div = document.createElement("div");
        div.classList.add("team-category");
        div.classList.add("flipcard-container");
        div.setAttribute("data-user-type", c);
        // category title
        var title = document.createElement("h2");
        title.innerText = cates[c];
        div.appendChild(title);
        // users
        sorted_by_cate[c].forEach(u => {
            // most parent div
            var user_div = document.createElement("div");
            user_div.classList.add("user-card");
            // profile
            var profile = document.createElement("div");
            profile.classList.add("profile");
            // profile img
            user_div.style.backgroundImage = `url('/img/p/${u.img}')`;
            // profile name
            var name = document.createElement("h3");
            name.innerText = u.name[0];
            profile.appendChild(name);
            // profile social-link
            if (u.links) {
                var social_link = document.createElement("div");
                social_link.classList.add("social-media-links");
                for (l in u.links) {
                    var a = document.createElement("a");
                    a.setAttribute("href", u.links[l]);
                    a.innerHTML = `<span class="fa">${l}</span>`;
                    social_link.appendChild(a);
                }
                profile.appendChild(social_link);
            }
            // profile end
            user_div.appendChild(profile);
            // role
            var role = document.createElement("p");
            role.classList.add("role");
            role.innerText = u.title;
            user_div.appendChild(role);
            // desc
            var desc = document.createElement("p");
            desc.classList.add("desc");
            desc.innerText = u.desc;
            user_div.appendChild(desc);
            // append the user
            div.appendChild(user_div);
        })
        document.querySelector(".content").appendChild(div);
        document.querySelector(".content").appendChild(document.createElement("hr"));
    })
</script>

<style>
    .content {
        margin-top: 60px;
        max-width: 800px;
    }

    .team-category {
        &>h2 {
            font-size: 2rem;
            font-weight: 500;
            margin: 20px;
            margin-top: 40px;
            margin-bottom: 10px;
            text-align: center;

            width: 100%;
            border: solid 1px 0px white;
        }
    }

    .user-card {
        max-width: 64rem;
        width: min(64rem, calc(100% - 80px));
        margin: 20px;
        padding: 20px;
        padding-left: 40px;
        padding-right: 40px;
        border-radius: 6px;
        margin-left: 10px;
        margin-right: 10px;
        flex-shrink: 0;
    }

    .user-card {
        background-size: cover;
        transition: all 0.3s;
        position: relative;
        height: 140px;
        width: 100px;
        overflow: hidden;

        & * {
            position: relative;
            z-index: 1;
            opacity: 0;
            transition: all 0.3s;
        }

        &>.role {
            text-align: center;
            margin: 7px;
            margin-top: 0;
            color: #8a939e;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1rem;
            font-weight: 450;
            line-height: 1.5;
        }

        &>.desc {
            text-align: left;
        }
    }

    .user-card:hover {
        & * {
            opacity: 1;
        }
    }

    .user-card::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.9));
        opacity: 0;
        transition: opacity .3s;
        z-index: 0;
    }

    .user-card:hover::before {
        opacity: 1;
    }

    .user-card>.profile {
        user-select: none;
        text-align: center;

        &>img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 10px;
        }

        &>h3 {
            margin: 0;
            font-size: 24px;
            display: inline-block;
        }

        &>.social-media-links {
            margin: 10px;
            display: inline-block;
        }
    }

    .social-media-links>a {
        margin: 0 10px;
        text-decoration: none;
        color: var(--text-color);
        font-size: 24px;
        transition: color 0.3s;
    }
</style>